<?php if(isset($model)):date_default_timezone_set('Asia/Jakarta'); $aksi = URL."controllers/artikel/artikel_control.php?model=artikel&method="; // halaman untuk eksekusiswitch($method){default :	echo "	<div class='span2' style='float:right;'> 		<form  method='get' action=''>			<div style='float:left; '>				<input id='cari_stok' class='form-control col-md-4' style='width:250px;' type='text' name='katacari' />			</div>			<div style='float:left; '>				&nbsp				&nbsp				<input type='submit' name='cari'  class='btn btn-primary' value='cari'/>			</div>		  		  </form><br/>		 </div>	";		echo "	<div class='span1'>	<a href='".URL."artikel/tambah' class='btn btn-primary'>Tambah artikel</a>	</div>	<br/>	<br/>	<table id='example2' class='table table-bordered table-striped ' >	<thead>		<tr >			<th>No</th>			<th>Judul</th>			<th>Konten</th>			<th>Bahasa</th>			<th>Publish</th>			<th>Tindakan</th>		</tr>			</thead>	<tbody>	" ; // header tabel	//selalu di atas		$semua =  $artikel->countArtikel();				$find = '';		if(isset($_REQUEST['cari'])){			$katacari = $_REQUEST['katacari'];			$find="&cari=h928hsolkcvnbw21&katacari=$katacari";								$semua =  $artikel->countCariArtikel($katacari);							}						$per_page = 30 ; // jumlah query per artikel 			$i= 1;					$pages = ceil($semua / $per_page); // melihat total blok yang ada				$page = (isset($_GET['hal']))?(int)$_GET['hal'] :1; // default page				$start = ($page-1)*$per_page; //startnya 				$no = ($page-1)*$per_page +1; // menentukan asending nomor tiap paging				$artikel = (isset($_REQUEST['cari']))?$artikel->cariArtikel($katacari,$start,$per_page):$artikel->getArtikel($start,$per_page); //logika inti : kalo cari terisi maka ke method cari artikel 				if($pages==0){echo "Data tidak ditemukan"; }		foreach($artikel as $artikel){			$bahasa = $artikel['bahasa']=='id'?'Indonesia':'English';		echo "		<tr>			<td>".$no."</td>			<td>".stripslashes (htmlspecialchars ($artikel['judul']))."</td>			<td>".substr(strip_tags($artikel['isi']),0,110)."</td>			<td>".$bahasa."</td>						<td align='center'>".stripslashes (htmlspecialchars ($artikel['publish']))."</td>					<td>						<div class='btn-group btn-group-xs'><a href='".URL."artikel/edit/".$artikel['id']."' class='btn btn-xs btn-info' data-toggle='tooltip' title='Edit'><i class='glyphicon glyphicon-pencil'></i></a></div>			 |   			 <div class='btn-group btn-group-xs'><a href='".$aksi."hapus&id=".$artikel['id']."' class='btn btn-xs btn-danger' data-toggle='tooltip' title='Hapus' onclick='return confirm(\"Apakah Anda benar-benar ingin menghapus item ini?\");'><i class='glyphicon glyphicon-remove'></i></a></div>			 			 <!--<a href=\"javascript: hapusAlert('".$artikel['id']."');\"> Hapus</a>--> 			</td>				</tr>				";		$no++;	}		echo "</ul> </center>";	echo "	</tbody>		</table>";echo "<center ><ul class='pagination pagination-small center m-t-none m-b-none'>";			// $req = empty($_REQUEST['view'])?'':$_REQUEST['view']; // mencari kata carinya						$root = URL.'artikel';//$_SERVER['PHP_SELF']; //."?view=".$req."&"; 						$blok = 10;			$ini  = ceil($page/$blok);						$mulai   =  ($blok * $ini) - ($blok-1);			$selesai =  ($blok<=$pages)?($ini * $blok):$pages ;						$kurang1 = $page -1;			$tambah1 = $page +1 ;						if($pages >=1 && $page<=$pages){				echo ($page!=1 or empty($page))?"<li style='cursor:pointer;'  ><a href='$root&hal=$kurang1$find'> Back </a> </li> ":'';				for($x=$mulai; $x<=$selesai; $x++)					if($x==$page){												echo "<li style='cursor:pointer;' class='active' > <a>$x</a></li> ";											}					else{ 						echo "<li style='cursor:pointer;'  ><a href='$root?hal=$x$find'>$x</a></li> ";					};								echo ($page!=$pages)?"<li style='cursor:pointer;'  ><a href='$root?hal=$tambah1$find'> Next </a> </li> ":'';																};	break;case "tambah":echo"<div class='panel panel-default'>				<div class='panel-heading text-center'>					<strong>Form Tambah Artikel</strong>				</div>				<div class='panel-body'>				<form role='form' action='".$aksi."tambah' method='POST' enctype='multipart/form-data'>					<div class='form-group'>						<input type='hidden' class='form-control' name='id_artikel'>					</div>					<div class='form-group'>						<label>Judul <span class='text-danger'>*</span></label>						<input type='text' class='form-control' name='judul' required>					</div>					<div class='form-group'>						<label>Konten <span class='text-danger'>*</span></label>						<textarea class='form-control' id='editor1' name='isi'></textarea>					</div>					<div class='form-group'>						<label>Penulis</label>						<input type='text' class='form-control' readonly value='".$_SESSION['nama_lengkap']."' name='penulis'>					</div>					<div class='form-group'>						<label>Bahasa</label>						<select class='form-control' name='bahasa'>							<option value='id'>Indonesia</option>							<option value='en'>Inggris</option>						</select>					</div>					<div class='form-group'>						<label>Pilih Gambar ( < 1 MB )</label>						<div class='col-md-4 input-group'>							<input type='file' class='form-control' name='file' id='uploadFile' accept='image/*'>							<label class='text-info' style='font-style:italic;font-size:12px;'>*format file .jpg, .png</a></label>						</div>					</div>					<div class='form-group'>						<label class='col-md-2' style='padding-left: 0;'>Publish</label>						<div class='col-md-10'>							<label class='radio-inline'><input type='radio' name='publish' value='Y' checked='checked' >Y</label>							<label class='radio-inline'><input type='radio' name='publish' value='N'>N</label>						</div>					</div>					<div class='form-group text-center'>						<button type='submit' class='btn btn-sm btn-primary' name='tambah' value='tambah'><i class='glyphicon glyphicon-check'></i> Simpan</button>						<button type='reset' class='btn btn-sm btn-danger' onclick='self.history.back()'><i class='glyphicon glyphicon-remove'></i> Batal</button>					</div>				</form>				</div>					<div id='imagePreview' style='width:400px; height:116px;'></div>								</div>";	echo "					";break;	case "edit":	// var_dump($parameter);	if(filter_var($parameter, FILTER_VALIDATE_INT)){		// echo $angka = $libs->stringHtml('123123');		// $nomor = '1231234ff&nbspdfkdjkjfd"nfjksldj';	  // $coba = filter_var($angka, FILTER_VALIDATE_INT);	  // $coba = filter_var($nomor, FILTER_SANITIZE_MAGIC_QUOTES);	  // var_dump($angka);	 $data = $artikel->getArtikelById($parameter);	 $artikel = $artikel->getArtikelById($parameter);	 	 echo"					<div class='panel panel-default'>					<div class='panel-heading text-center'>						<strong>Form Edit Artikel</strong>					</div>					<div class='panel-body'>						<form role='form' action='".$aksi.'edit'."' method='POST' enctype='multipart/form-data'>							<div class='form-group'>								<input type='hidden' class='form-control' name='id' value='".$data['id']."'>																							</div>							<div class='form-group'>								<label>Judul <span class='text-danger'>*</span></label>								<input type='text' class='form-control' name='judul' value='".$data['judul']."' required>							</div>							<div class='form-group'>								<label>Konten <span class='text-danger'>*</span></label>																<textarea class='form-control' id='editor1' name='isi'>";																echo $data['isi'];													  echo "</textarea>							</div>							<div class='form-group'>								<label>Penulis</label>								<input type='text' class='form-control' readonly name='penulis' value='".$data['penulis']."'>							</div>							<div class='form-group'>								<label>Bahasa</label>								<select class='form-control' name='bahasa'>";									if ($data['bahasa']=='en') {										echo "<option value='en' selected>Inggris</option><option value='id'>Indonesia</option>";									} else if ($data['bahasa']=='id') {										echo "<option value='en'>Inggris</option><option value='id' selected>Indonesia</option>";									}								echo"								</select>							</div>";															echo"							<div class='form-group'>								<label>Nama Gambar </label>								<div class='row'>									<div class='col-md-6'>										<input type='text' readonly class='form-control'  name='gambar' value='".$data['gambar']."'>									</div>									<div class='col-md-6 form-group'>										<a  href='".$aksi."hapus_gambar&id=".$data['id']."' class='btn btn-sm btn-default'> <i class='glyphicon glyphicon-remove'></i> Hapus Gambar</a>									</div>																									</div>							</div>																<div class='form-group'>								<label>Ganti Gambar</label>																<div class='col-md-6 input-group'>									<input type='file'  name='file' accept='image/*' id='uploadFile' class='form-control'>									<label class='text-info' style='font-style:italic;font-size:12px;'>*format file .jpg, .png </label>								</div>							</div>";														echo"<div class='form-group'>";															if ($data['publish']=="N"){									echo"<label class='col-md-2' style='padding-left: 0;'>Publish</label>										<div class='col-md-10'>											<label class='radio-inline'><input type='radio' name='publish' value='Y'>Y</label>											<label class='radio-inline'><input type='radio' name='publish' value='N'  checked='checked'>N</label>										</div>";								}								else{									echo"<label class='col-md-2' style='padding-left: 0;'>Publish</label>										<div class='col-md-10'>											<label class='radio-inline'><input type='radio' name='publish' value='Y' checked='checked'>Y</label>											<label class='radio-inline'><input type='radio' name='publish' value='N'>N</label>										</div>";								}							echo"</div>							<div class='col-md-12 form-group text-center'>								<button type='submit' class='btn btn-sm btn-primary' value='submit' name='submit'><i class='glyphicon glyphicon-check'></i> Update</button>								<button type='reset' class='btn btn-sm btn-danger' onclick='self.history.back()'><i class='glyphicon glyphicon-remove'></i> Batal</button>							</div>						</form>																							<img style='width:400px; height:266px; float:left;' src='../../../images/content/news/".$data['gambar']."'>										</div>					<div id='imagePreview' style='width:400px; height:266px;'></div>				</div>";	 	 break;}else{		header("location:".URL."halaman");		return false;	}}?><script type='text/javascript'>  function hapusAlert(iddokumen){		var conBox = confirm("Anda yakin ingin menghapus data ini?");		if(conBox){ //modul/mod_artikel/artikelAksi.php?act=artikel&page=hapus&id=$artikel[id]			location.href="<?php echo $aksi."hapus" ;?>&id="+ iddokumen;		}else{			return false;		}	};</script><?php endif;?>